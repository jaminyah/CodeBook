box: debian
build:
  steps:
    - arjen/hugo-build@1.25.2: 
        version: "0.32.3"
        theme: material-design
        flags: --buildDrafts=true
        disable_pygments: true
        clean_before: true
        prod_branches: master

deploy:
  steps:
    - install-packages:
        packages: openssh-client openssh-server

    - add-to-known_hosts:
        hostname: 45.33.11.216
        local: true

    - add-ssh-key:
        keyname: linode
 
    - script:
        name: Static site update on remote Linode
        code: |
          ssh wercker@45.33.11.216 git -C ~/hugo.io/codebook/ pull
